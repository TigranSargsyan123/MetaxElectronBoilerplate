digraph g {
        compound=true;
        graph [
                rankdir = "LR"
                bgcolor = "lightyellow"
                style="filled"
        ];

        node [
                fontsize = "16"
                shape = "box"
                style="filled"
                color = "lightblue"
        ];

        config [
                label = "config"
        ]

        key_manager [
                label = "key manager"
        ]

        user_manager [
                label="user manager";
        ]

        kernel [
                label="kernel";
        ]

        storage [
                label="storage";
        ]

        router [
                label="router";
        ]

        "config" -> "key_manager" [
                label="1. initialize keys (paths)"
                color="greenyellow"
        ];

        "config" -> "storage" [
                label="1. initialize(configs)"
                color="greenyellow"
        ];

        "config" -> "router" [
                label="1. initialize(configs)"
                color="greenyellow"
        ];

        "key_manager" -> "config" [
                label="2. initialized"
                color="green"
        ];

        "key_manager" -> "kernel" [
                label="2. init fail"
                color="red"
        ];

        "config" -> "kernel" [
                label="3. initialize(configs)"
                color="green3"
        ];

        "config" -> "user_manager" [
                label="3. storage path, user json info path, timer value"
                color="green3"
        ];

        "config" -> "bakcup" [
                label="3. initialize(configs)"
                color="green3"
        ];

        "config" -> "link" [
                label="3. initialize(configs)"
                color="green3"
        ];

        "user_manager" -> "kernel" [
                label="4. user json"
                color="green4"
        ];

        "user_manager" -> "kernel" [
                label="4. init fail"
                color="red"
        ];

        user_manager1 [
                label="user manager";
        ]

        kernel1 [
                label="kernel";
        ]


        "user_manager1" -> "kernel1" [
                label="4. get uj from peer"
                color="green4"
        ]

        "kernel1" -> "user_manager1" [
                label="5. got uj"
                color="green4"
        ]

        "kernel1" -> "user_manager1" [
                label="5. failed to get uj"
                color="red"
        ]

        "user_manager1" -> "kernel1" [
                label="6. user json"
                color="green4"
        ]

        "user_manager" -> "user_manager1" [
                style="invis"
        ]

}

